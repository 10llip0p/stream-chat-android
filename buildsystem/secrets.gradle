static def varToCamelCase(String envVarName) {
    envVarName.split('_').collect { it -> it.toLowerCase().capitalize() }.join()
}

ext {
    keyConfigPath = "${projectDir.path}/secret.properties"
    File keyConfigFile = file(keyConfigPath)
    keyProps = new Properties()

    if (keyConfigFile.exists()) {
        keyProps.load(keyConfigFile.newInputStream())
    } else {
        throw new FileNotFoundException("File $keyConfigPath not found")
    }

    keyProperty = { var ->
        propertyName = varToCamelCase(var)
        prop = keyProps[propertyName]
        if (prop == null || prop.toString().isEmpty())
            throw new MissingPropertyException("Missing property: $propertyName")
        prop
    }
}
