# Initializing the SDK

## Creating a ChatClient

When integrating with Stream Chat, your first step is initializing the `ChatClient`. The `ChatClient` is the main entry point for all operations in the library. Create a single `ChatClient` and re-use it across your application.

A best practice is to initialize `ChatClient` in the `Application` class and create a static reference to the client:

 ```kotlin
 class App : Application() {
     override fun onCreate() {
         super.onCreate()
         val chatClient = ChatClient.Builder("apiKey", context).build()

         // Static reference to initialised client
         val staticClientRef = ChatClient.instance()
     }
 }
 ```
> You can access your apiKey in the [Dashboard](https://getstream.io/dashboard)

If you create the `ChatClient` instance following the pattern in the previous example, you will be able to access that instance from any part of your application. 

Access the `ChatClient` using the `instance()` method:

 ```kotlin
 class MainActivity: AppCompatActivity() {
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         val chatClient = ChatClient.instance() // Returns the same value as `chatClient` in the previous example.
     }
 }
 ```

## Creating a ChatDomain

As a first step, you need to initialize each of the SDK components. Most of the times, this will happen only once in the _Application_ class:

```kotlin
val chatClient = ChatClient.Builder(apiKey, appContext).build()

val chatDomain = ChatDomain.Builder(appContext, chatClient)
    .offlineEnabled()
    .userPresenceEnabled()
    .build()
```

Every _Builder_ exposes methods for SDK configuration.

## Connecting a user

The next step is connecting the user. A valid `StreamChat` token is all you need to properly set your current app user as the current user of `ChatClient`. Because you must use your `API_SECRET` to create this token, it is unsafe to generate this token outside of a secure server.

```kotlin
val user = User(
    id = "bender",
    extraData = mutableMapOf(
        "name" to "Bender",
        "image" to "https://bit.ly/321RmWb",
    ),
)

ChatClient.instance().connectUser(user = user, token = "userToken")
    .enqueue { result ->
        if (result.isSuccess) {
            // Handle success
        } else {
            // Handle error
    }
}
```

## Using Chat without a token provider endpoint
If you don't have a token provider endpoint available yet, there are two options available to continue development and testing:

- [Disable token authentication while in development](#Development-Token-Mode)
- [Manually generate a user token](#Manually-Generate-a-User-Token)

### Disabling Token Auth
For development applications, you can disable token authentication checks in the [Dashboard](https://getstream.io/dashboard). This will let you generate tokens using the `ChatClient` without needing a token provider endpoint. 

To disable auth checks, navigage to the [Dashboard](https://getstream.io/dashboard) and complete the following steps:

1. Select your App.
1. Select Chat -> Chat Overview.
1. Scroll to the Authentication section.
1. Toggle *Disable Auth Checks*

<!-- warning -->
Never disable Auth Checks in a production application. Auth checks are an important part of security for a production application and should only be done for proofs-of-concept and applications in the early development stage.
<!-- /warning -->

```kotlin
val user = User( 
    id = "bender", 
    extraData = mutableMapOf( 
        "name" to "Bender", 
        "image" to "https://bit.ly/321RmWb", 
    ), 
) 
val token = ChatClient.devToken(user.id) 
 
ChatClient.connectUser(user, token).enqueue { /* ... */ } 

```
### Manually generating a user token
You can manually create a valid user token with our [JWT generator](https://getstream.io/chat/docs/android/token_generator/?language=kotlin).

1. Copy your `API_SECRET` from the [Dashboard](https://getstream.io/dashboard).
1. Open the JWT Generator.
1. Enter your `API_SECRET`, a `User ID`, and set an expiration time.
1. Copy the token generated by the app.
